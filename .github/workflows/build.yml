name: Build

on:
  push:
    branches:
      - main
      - build/*

jobs:
  run-docker:
    runs-on: ubuntu-latest
    
    steps:
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v1

    - name: Run flaresolverr container
      run: |
        docker run -d \
          --name=flaresolverr \
          -p 8191:8191 \
          -e LOG_LEVEL=info \
          --restart unless-stopped \
          ghcr.io/flaresolverr/flaresolverr:latest
        curl -L -X POST 'http://localhost:8191/v1' \
          -H 'Content-Type: application/json' \
          --data-raw '{
            "cmd": "request.get",
            "url": "http://www.op.gg/modes/aram",
            "maxTimeout": 60000
          }'
    
